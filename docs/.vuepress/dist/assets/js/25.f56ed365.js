(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{400:function(t,_,a){"use strict";a.r(_);var v=a(46),s=Object(v.a)({},(function(){var t=this,_=t.$createElement,a=t._self._c||_;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"pidstat命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pidstat命令"}},[t._v("#")]),t._v(" pidstat命令")]),t._v(" "),a("h3",{attrs:{id:"_1-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍"}},[t._v("#")]),t._v(" 1.介绍")]),t._v(" "),a("p",[t._v("pidstat是sysstat工具的一个命令，用于监控全部或指定进程的cpu、内存、线程、设备IO等系统资源的占用情况，linux系统如果没有这个指令则需要安装sysstat。")]),t._v(" "),a("p",[t._v("pidstat首次运行时显示自系统启动开始的各项统计信息，之后运行pidstat将显示自上次运行该命令以后的统计信息。用户可以通过指定统计的次数和时间来获得所需的统计信息。")]),t._v(" "),a("h3",{attrs:{id:"_2-命令参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令参数"}},[t._v("#")]),t._v(" 2.命令参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("-u")]),t._v(" "),a("td",[t._v("默认的参数，显示各个进程的cpu使用统计")])]),t._v(" "),a("tr",[a("td",[t._v("-r")]),t._v(" "),a("td",[t._v("显示各个进程的内存使用统计")])]),t._v(" "),a("tr",[a("td",[t._v("-d")]),t._v(" "),a("td",[t._v("显示各个进程的IO使用情况")])]),t._v(" "),a("tr",[a("td",[t._v("-p")]),t._v(" "),a("td",[t._v("指定进程号")])]),t._v(" "),a("tr",[a("td",[t._v("-w")]),t._v(" "),a("td",[t._v("显示每个进程的上下文切换情况")])]),t._v(" "),a("tr",[a("td",[t._v("-t")]),t._v(" "),a("td",[t._v("显示选择任务的线程的统计信息外的额外信息")])]),t._v(" "),a("tr",[a("td",[t._v("-T { TASK")]),t._v(" "),a("td",[t._v("CHILD")])]),t._v(" "),a("tr",[a("td",[t._v("-V")]),t._v(" "),a("td",[t._v("版本号")])]),t._v(" "),a("tr",[a("td",[t._v("-h")]),t._v(" "),a("td",[t._v("在一行上显示了所有活动，这样其他程序可以容易解析。")])]),t._v(" "),a("tr",[a("td",[t._v("-I")]),t._v(" "),a("td",[t._v("在SMP环境，表示任务的CPU使用率/内核数量")])]),t._v(" "),a("tr",[a("td",[t._v("-l")]),t._v(" "),a("td",[t._v("显示命令名和所有参数")])])])]),t._v(" "),a("h3",{attrs:{id:"_3-使用实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用实例"}},[t._v("#")]),t._v(" 3.使用实例")]),t._v(" "),a("h4",{attrs:{id:"_1-查看所有进程的-cpu-使用情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看所有进程的-cpu-使用情况"}},[t._v("#")]),t._v(" 1.查看所有进程的  CPU 使用情况")]),t._v(" "),a("p",[t._v("在测试服务上执行:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@node14 ~]# pidstat -u -p ALL\n")])])]),a("p",[t._v("可以看到以下输出:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Linux 3.10.0-1160.25.1.el7_lustre.x86_64 (node13.domain.cn)     12/29/2021      _x86_64_        (48 CPU)\n\n01:47:35 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command\n01:47:35 PM     0         1    0.01    0.01    0.00    0.02    21  systemd\n01:47:35 PM     0         2    0.00    0.00    0.00    0.00    14  kthreadd\n01:47:35 PM     0         4    0.00    0.00    0.00    0.00     0  kworker/0:0H\n01:47:35 PM     0         5    0.00    0.00    0.00    0.00    21  kworker/u96:0\n01:47:35 PM     0         6    0.00    0.00    0.00    0.00     0  ksoftirqd/0\n01:47:35 PM     0         7    0.00    0.00    0.00    0.00     0  migration/0\n01:47:35 PM     0         8    0.00    0.00    0.00    0.00     0  rcu_bh\n01:47:35 PM     0         9    0.00    0.01    0.00    0.01    37  rcu_sched\n01:47:35 PM     0        10    0.00    0.00    0.00    0.00     0  lru-add-drain\n01:47:35 PM     0        11    0.00    0.00    0.00    0.00     0  watchdog/0\n01:47:35 PM     0        12    0.00    0.00    0.00    0.00     1  watchdog/1\n01:47:35 PM     0        13    0.00    0.00    0.00    0.00     1  migration/1\n01:47:35 PM     0        14    0.00    0.00    0.00    0.00     1  ksoftirqd/1\n01:47:35 PM     0        16    0.00    0.00    0.00    0.00     1  kworker/1:0H\n01:47:35 PM     0        17    0.00    0.00    0.00    0.00     9  kworker/u97:0\n01:47:35 PM     0        18    0.00    0.00    0.00    0.00     2  watchdog/2\n01:47:35 PM     0        19    0.00    0.00    0.00    0.00     2  migration/2\n01:47:35 PM     0        20    0.00    0.00    0.00    0.00     2  ksoftirqd/2\n\n")])])]),a("h4",{attrs:{id:"输出说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出说明"}},[t._v("#")]),t._v(" 输出说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("信息")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("PID")]),t._v(" "),a("td",[t._v("进程ID")])]),t._v(" "),a("tr",[a("td",[t._v("%usr")]),t._v(" "),a("td",[t._v("进程在用户空间占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("%system")]),t._v(" "),a("td",[t._v("进程在内核空间占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("%guest")]),t._v(" "),a("td",[t._v("进程在虚拟机占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("%CPU")]),t._v(" "),a("td",[t._v("进程占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("CPU")]),t._v(" "),a("td",[t._v("处理进程的cpu编号")])]),t._v(" "),a("tr",[a("td",[t._v("Command")]),t._v(" "),a("td",[t._v("当前进程对应的命令")])])])]),t._v(" "),a("h4",{attrs:{id:"_2-内存使用情况统计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-内存使用情况统计"}},[t._v("#")]),t._v(" 2.内存使用情况统计")]),t._v(" "),a("p",[t._v("在测试服务上执行:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@node14 ~]# pidstat -r\n")])])]),a("p",[t._v("可以看到以下输出:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Linux 3.10.0-1160.25.1.el7_lustre.x86_64 (node13.domain.cn)     12/29/2021      _x86_64_        (48 CPU)\n\n01:55:23 PM   UID       PID  minflt/s  majflt/s     VSZ    RSS   %MEM  Command\n01:55:23 PM     0         1      0.61      0.00   51824   4068   0.00  systemd\n01:55:23 PM     0       903      0.92      0.00  174388 101368   0.10  systemd-journal\n01:55:23 PM     0       918      0.00      0.00  272304   3468   0.00  lvmetad\n01:55:23 PM     0       954      0.00      0.00   45592   2440   0.00  systemd-udevd\n01:55:23 PM     0      1297      0.00      0.00   55532   1088   0.00  auditd\n01:55:23 PM     0      1333      0.00      0.00   90568   3268   0.00  rngd\n01:55:23 PM    81      1358      0.01      0.00   58232   2400   0.00  dbus-daemon\n01:55:23 PM     0      1374      1.40      0.00   21936   1540   0.00  irqbalance\n01:55:23 PM    32      1390      0.00      0.00   69280   1004   0.00  rpcbind\n01:55:23 PM     0      1396      0.16      0.00   26384   1784   0.00  systemd-logind\n01:55:23 PM   999      1404      0.00      0.00  612248  11248   0.01  polkitd\n01:55:23 PM    38      1569      0.00      0.00   25732   1968   0.00  ntpd\n01:55:23 PM     0      1570      0.00      0.00  201428   1260   0.00  gssproxy\n01:55:23 PM     0      1580      0.00      0.00   25908    944   0.00  atd\n01:55:23 PM     0      1581      0.20      0.00  126388   1608   0.00  crond\n01:55:23 PM     0      1586      0.00      0.00  110204    848   0.00  agetty\n01:55:23 PM     0      1671      0.00      0.00  112924   4380   0.00  sshd\n01:55:23 PM     0      1672      0.01      0.00  574296  17548   0.02  tuned\n\n")])])]),a("h4",{attrs:{id:"输出说明-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出说明-2"}},[t._v("#")]),t._v(" 输出说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("信息")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("PID")]),t._v(" "),a("td",[t._v("进程标识符")])]),t._v(" "),a("tr",[a("td",[t._v("Minflt/s")]),t._v(" "),a("td",[t._v("任务每秒发生的次要错误，不需要从磁盘中加载页")])]),t._v(" "),a("tr",[a("td",[t._v("Majflt/s")]),t._v(" "),a("td",[t._v("任务每秒发生的主要错误，需要从磁盘中加载页")])]),t._v(" "),a("tr",[a("td",[t._v("VSZ")]),t._v(" "),a("td",[t._v("虚拟地址大小，虚拟内存的使用KB")])]),t._v(" "),a("tr",[a("td",[t._v("RSS")]),t._v(" "),a("td",[t._v("常驻集合大小，非交换区五里内存使用KB")])]),t._v(" "),a("tr",[a("td",[t._v("Command")]),t._v(" "),a("td",[t._v("task命令名")])])])]),t._v(" "),a("h4",{attrs:{id:"_3-显示各个进程的io使用情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-显示各个进程的io使用情况"}},[t._v("#")]),t._v(" 3.显示各个进程的IO使用情况")]),t._v(" "),a("p",[t._v("在测试服务上执行:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@node14 ~]# pidstat -d\n")])])]),a("p",[t._v("可以看到以下输出:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Linux 3.10.0-1160.25.1.el7_lustre.x86_64 (node13.domain.cn)     12/29/2021      _x86_64_        (48 CPU)\n\n01:57:32 PM   UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s  Command\n01:57:32 PM     0         1      0.16      0.22      0.08  systemd\n01:57:32 PM     0        17      0.00      0.00      0.00  kworker/u97:0\n01:57:32 PM     0       780      0.00      0.00      0.00  kworker/u97:2\n01:57:32 PM     0       818      0.00      0.00      0.00  xfsaild/dm-0\n01:57:32 PM     0       903      0.00      0.00      0.00  systemd-journal\n01:57:32 PM     0       954      0.00      0.00      0.00  systemd-udevd\n01:57:32 PM     0      1297      0.00      0.06      0.00  auditd\n01:57:32 PM     0      1333      0.00      0.00      0.00  rngd\n01:57:32 PM   999      1404      0.00      0.00      0.00  polkitd\n01:57:32 PM    38      1569      0.00      0.00      0.00  ntpd\n01:57:32 PM     0      1570      0.00      0.00      0.00  gssproxy\n01:57:32 PM     0      1581      0.00      0.05      0.00  crond\n01:57:32 PM     0      1671      0.00      0.00      0.00  sshd\n01:57:32 PM     0      1672      0.00      0.00      0.00  tuned\n01:57:32 PM     0      1674      0.00      0.00      0.00  condor_master\n")])])]),a("h4",{attrs:{id:"输出说明-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出说明-3"}},[t._v("#")]),t._v(" 输出说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("信息")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("PID")]),t._v(" "),a("td",[t._v("进程id")])]),t._v(" "),a("tr",[a("td",[t._v("kB_rd/s")]),t._v(" "),a("td",[t._v("每秒从磁盘读取的KB")])]),t._v(" "),a("tr",[a("td",[t._v("kB_wr/s")]),t._v(" "),a("td",[t._v("每秒写入磁盘KB")])]),t._v(" "),a("tr",[a("td",[t._v("kB_ccwr/s")]),t._v(" "),a("td",[t._v("任务取消的写入磁盘的KB。当任务截断脏的pagecache的时候会发生。")])]),t._v(" "),a("tr",[a("td",[t._v("COMMAND")]),t._v(" "),a("td",[t._v("task的命令名")])])])]),t._v(" "),a("h4",{attrs:{id:"_4-显示每个进程的上下文切换情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-显示每个进程的上下文切换情况"}},[t._v("#")]),t._v(" 4.显示每个进程的上下文切换情况")]),t._v(" "),a("p",[t._v("在测试服务上执行:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@node14 ~]# pidstat -w\n")])])]),a("p",[t._v("可以看到以下输出:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Linux 3.10.0-1160.25.1.el7_lustre.x86_64 (node13.domain.cn)     12/29/2021      _x86_64_        (48 CPU)\n\n01:58:37 PM   UID       PID   cswch/s nvcswch/s  Command\n01:58:37 PM     0         1      1.18      0.04  systemd\n01:58:37 PM     0         2      0.01      0.00  kthreadd\n01:58:37 PM     0         4      0.00      0.00  kworker/0:0H\n01:58:37 PM     0         5      0.00      0.00  kworker/u96:0\n01:58:37 PM     0         6      0.50      0.00  ksoftirqd/0\n01:58:37 PM     0         7      0.00      0.00  migration/0\n01:58:37 PM     0         8      0.00      0.00  rcu_bh\n01:58:37 PM     0         9      4.75      0.00  rcu_sched\n01:58:37 PM     0        10      0.00      0.00  lru-add-drain\n01:58:37 PM     0        11      0.25      0.00  watchdog/0\n01:58:37 PM     0        12      0.25      0.00  watchdog/1\n01:58:37 PM     0        13      0.00      0.00  migration/1\n01:58:37 PM     0        14      0.00      0.00  ksoftirqd/1\n01:58:37 PM     0        16      0.00      0.00  kworker/1:0H\n\n")])])]),a("h4",{attrs:{id:"输出说明-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出说明-4"}},[t._v("#")]),t._v(" 输出说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("信息")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("PID")]),t._v(" "),a("td",[t._v("进程id")])]),t._v(" "),a("tr",[a("td",[t._v("Cswch/s")]),t._v(" "),a("td",[t._v("每秒主动任务上下文切换数量")])]),t._v(" "),a("tr",[a("td",[t._v("Nvcswch/s")]),t._v(" "),a("td",[t._v("每秒被动任务上下文切换数量")])]),t._v(" "),a("tr",[a("td",[t._v("Command")]),t._v(" "),a("td",[t._v("命令名")])])])]),t._v(" "),a("h4",{attrs:{id:"_5-显示选择任务的线程的统计信息外的额外信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-显示选择任务的线程的统计信息外的额外信息"}},[t._v("#")]),t._v(" 5.显示选择任务的线程的统计信息外的额外信息")]),t._v(" "),a("p",[t._v("在测试服务上执行:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@node14 ~]# pidstat -t\n")])])]),a("p",[t._v("可以看到以下输出:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Linux 3.10.0-1160.25.1.el7_lustre.x86_64 (node13.domain.cn)     12/29/2021      _x86_64_        (48 CPU)\n\n02:01:09 PM   UID      TGID       TID    %usr %system  %guest    %CPU   CPU  Command\n02:01:09 PM     0         1         -    0.01    0.01    0.00    0.02    21  systemd\n02:01:09 PM     0         -         1    0.01    0.01    0.00    0.01    21  |__systemd\n02:01:09 PM     0         2         -    0.00    0.00    0.00    0.00    14  kthreadd\n02:01:09 PM     0         -         2    0.00    0.00    0.00    0.00    14  |__kthreadd\n02:01:09 PM     0         5         -    0.00    0.00    0.00    0.00    21  kworker/u96:0\n02:01:09 PM     0         -         5    0.00    0.00    0.00    0.00    21  |__kworker/u96:0\n02:01:09 PM     0         6         -    0.00    0.00    0.00    0.00     0  ksoftirqd/0\n02:01:09 PM     0         -         6    0.00    0.00    0.00    0.00     0  |__ksoftirqd/0\n02:01:09 PM     0         7         -    0.00    0.00    0.00    0.00     0  migration/0\n02:01:09 PM     0         -         7    0.00    0.00    0.00    0.00     0  |__migration/0\n02:01:09 PM     0         9         -    0.00    0.01    0.00    0.01    11  rcu_sched\n02:01:09 PM     0         -         9    0.00    0.01    0.00    0.01    11  |__rcu_sched\n02:01:09 PM     0        11         -    0.00    0.00    0.00    0.00     0  watchdog/0\n02:01:09 PM     0         -        11    0.00    0.00    0.00    0.00     0  |__watchdog/0\n02:01:09 PM     0        12         -    0.00    0.00    0.00    0.00     1  watchdog/1\n02:01:09 PM     0         -        12    0.00    0.00    0.00    0.00     1  |__watchdog/1\n02:01:09 PM     0        13         -    0.00    0.00    0.00    0.00     1  migration/1\n\n")])])]),a("h4",{attrs:{id:"输出说明-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出说明-5"}},[t._v("#")]),t._v(" 输出说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("信息")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("TGID")]),t._v(" "),a("td",[t._v("主线程的表示")])]),t._v(" "),a("tr",[a("td",[t._v("TID")]),t._v(" "),a("td",[t._v("线程id")])]),t._v(" "),a("tr",[a("td",[t._v("%usr")]),t._v(" "),a("td",[t._v("进程在用户空间占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("%system")]),t._v(" "),a("td",[t._v("进程在内核空间占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("%guest")]),t._v(" "),a("td",[t._v("进程在虚拟机占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("%CPU")]),t._v(" "),a("td",[t._v("进程占用cpu的百分比")])]),t._v(" "),a("tr",[a("td",[t._v("CPU")]),t._v(" "),a("td",[t._v("处理进程的cpu编号")])]),t._v(" "),a("tr",[a("td",[t._v("Command")]),t._v(" "),a("td",[t._v("当前进程对应的命令")])])])]),t._v(" "),a("p",[t._v("实例1：显示所有设备负载情况")])])}),[],!1,null,null,null);_.default=s.exports}}]);