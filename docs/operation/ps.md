# ps命令

### 1.介绍

要对进程进行监测和控制,首先必须要了解当前进程的情况,也就是需要查看当前进程,ps命令就是最基本进程查看命令。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等等.总之大部分信息都是可以通过执行该命令得到。

#### ps是显示瞬间进程的状态，并不动态连续；如果想对进程进行实时监控应该用top命令。

### 2.命令参数

|参数|含义|
|-|-|
-A |所有的进程均显示出来，与 -e 具有同样的效用；
-a | 显示现行终端机下的所有进程，包括其他用户的进程；
-u |以用户为主的进程状态 ；
x |通常与 a 这个参数一起使用，可列出较完整信息；
l |较长、较详细的将该PID 的的信息列出；
j |工作的格式 (jobs format)
-f |做一个更为完整的输出。

#### 特别说明：由于 ps 能够支持的系统类型相当的多，所以参数很多，而且有没有加上 - 差别很多，以下只分析两个常用参数。

### 3.使用实例

#### 1. 将目前属于您自己这次登入的 PID 与相关信息列示出来

在测试服务上执行:

```
[root@node14 ~]# ps -l
```

可以看到以下输出:

```
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0  2822  2820  0  80   0 - 28911 do_wai pts/0    00:00:00 bash
0 R     0  4174  2822  0  80   0 - 38337 -      pts/0    00:00:00 ps
```

#### 输出说明:

|信息|含义|
|-| -|
F | 代表这个程序的旗标 (flag)， 4 代表使用者为 superuser；
S | 代表这个程序的状态 (STAT)；
UID | 代表执行者身份
PID | 进程的ID号！
PPID | 父进程的ID；
C | CPU使用的资源百分比
PRI| 指进程的执行优先权(Priority的简写)，其值越小越早被执行；
NI | 这个进程的nice值，其表示进程可被执行的优先级的修正数值；
ADDR | 这个是内核函数，指出该程序在内存的那个部分。如果是个执行 的程序，一般就是『 - 』
SZ | 使用掉的内存大小；
WCHAN | 目前这个程序是否正在运作当中，若为 - 表示正在运作；
TTY | 登入者的终端机位置；
TIME | 使用掉的 CPU 时间；
CMD | 所下达的指令名称；


#### 2.列出目前所有的正在内存当中的程序

在测试服务上执行:

```
[root@node14 ~]# ps aux
```

可以看到以下输出:

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0  51824  4068 ?        Ss   Nov22  12:05 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
root         2  0.0  0.0      0     0 ?        S    Nov22   0:00 [kthreadd]
root         4  0.0  0.0      0     0 ?        S<   Nov22   0:00 [kworker/0:0H]
root         5  0.0  0.0      0     0 ?        S    Nov22   0:00 [kworker/u96:0]
root         6  0.0  0.0      0     0 ?        S    Nov22   0:18 [ksoftirqd/0]
root         7  0.0  0.0      0     0 ?        S    Nov22   0:00 [migration/0]
root         8  0.0  0.0      0     0 ?        S    Nov22   0:00 [rcu_bh]
root         9  0.0  0.0      0     0 ?        S    Nov22   4:15 [rcu_sched]
root        10  0.0  0.0      0     0 ?        S<   Nov22   0:00 [lru-add-drain]
root        11  0.0  0.0      0     0 ?        S    Nov22   0:09 [watchdog/0]
root        12  0.0  0.0      0     0 ?        S    Nov22   0:08 [watchdog/1]
root        13  0.0  0.0      0     0 ?        S    Nov22   0:00 [migration/1]
root        14  0.0  0.0      0     0 ?        S    Nov22   0:00 [ksoftirqd/1]
root        16  0.0  0.0      0     0 ?        S<   Nov22   0:00 [kworker/1:0H]

```

#### 输出说明:

|信息|含义|
|-| -|
USER|该进程属于那个使用者账号。
PID |该进程的进程ID号。
%CPU|该进程使用掉的 CPU 资源百分比；
%MEM|该进程所占用的物理内存百分比；
VSZ |该进程使用掉的虚拟内存量 (Kbytes)
RSS |该进程占用的固定的内存量 (Kbytes)
TTY |该进程是在那个终端机上面运作，若与终端机无关，则显示 ?。另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序。
STAT|该程序目前的状态，主要的状态有：
R |该程序目前正在运作，或者是可被运作；
S |该程序目前正在睡眠当中，但可被某些讯号(signal) 唤醒。
T |该程序目前正在侦测或者是停止了；
Z |该程序应该已经终止，但是其父程序却无法正常的终止他，造成 zombie (疆尸) 程序的状态
START|该进程被触发启动的时间；
TIME |该进程实际使用 CPU 运作的时间。
COMMAND|该程序的实际指令。